<p *ngIf="error">{{error}}</p>
<mat-card *ngIf="movie" class="movie-card">
    <mat-card-header>
        <img mat-card-avatar [src]="movie.externalData.poster">
        <mat-card-title>{{ movie.externalData.title }}</mat-card-title>
        <mat-card-subtitle>Copies available: {{ movie.inventory.available }}</mat-card-subtitle>
    </mat-card-header>
    <div class="trailer-container" *ngIf="getMovieEmbed()">
        <iframe [src]="getMovieEmbed()" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
    <mat-card-content class="movie-description">
        <p>{{ movie.externalData.description }}</p>
        <span *ngIf="movieRentDetails">
            *You currently have a copy of this movie. Please remember to return it before {{ movieRentDetails.rentUntil | date:'fullDate' }}
        </span>
    </mat-card-content>
    <mat-accordion>
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>Details</mat-panel-title>
            </mat-expansion-panel-header>
            <p><b>Director:</b> {{ movie.externalData.director }}</p>
            <p><b>Genre:</b> {{ movie.externalData.genre }}</p>
            <p><b>Year:</b> {{ movie.externalData.year }}</p>
            <p><b>Duration:</b> {{ movie.externalData.runtime }}</p>
        </mat-expansion-panel>
        <mat-expansion-panel *ngIf="canRentMovie()">
            <mat-expansion-panel-header>
                <mat-panel-title>Rent movie</mat-panel-title>
            </mat-expansion-panel-header>
            <app-rental-form (onRent)="rentMovie($event)"></app-rental-form>
        </mat-expansion-panel>
    </mat-accordion>
    <mat-card-actions>
        <a mat-button [routerLink]="['/']">Back</a>
        <button mat-button (click)="openMovieDialog()">Edit</button>
    </mat-card-actions>
</mat-card>