<div class="rental-history">
    <div fxLayout="row">
        <div fxFlex="10"></div>
        <div fxFlex="80">
            <div class="bb-rounded mat-app-background" fxLayout="column" fxLayoutGap="15px">
                <ng-container *ngIf="rentals && rentals.length; else noHistory">
                    <div *ngFor="let rental of rentals" class="rental-entry">
                        <div fxLayout="row" fxFlexFill>
                            <div class="rental-picture" fxFlex="40">
                                <img [src]="rental.movie.poster"> 
                            </div>
                            <div fxFlex="60">
                                <div class="rental-details">
                                    <h2 matLine>
                                        <a [routerLink]="['/movies', rental.movieId]">
                                            {{ rental.movie.title }}
                                        </a>
                                    </h2>
                                    <p matLine><b>Rented at: </b>{{ rental.rentedAt | date:'medium' }}</p>
                                    <p matLine *ngIf="rental.returnedAt;else deadline"><b>Returned At: </b>{{ rental.returnedAt | date:'medium' }}</p>
                                    <ng-template #deadline>
                                        <p matLine class="deadline-text"><b>Deadline: </b>{{ rental.rentUntil | date }}</p>
                                        <app-rental-return [details]="rental" (returnMovie)="returnMovie(rental)"></app-rental-return>
                                    </ng-template>
                                </div>
                            </div>
                        </div>
                        <mat-divider></mat-divider>
                    </div>
                </ng-container>
                <ng-template #noHistory>
                    <div class="no-history">
                        <h1>You have no movies in your history</h1>
                        <a mat-button color="primary" [routerLink]="['/']">Rent now</a>
                    </div>
                </ng-template>
            </div>
        </div>
        <div fxFlex></div>
    </div>
</div>